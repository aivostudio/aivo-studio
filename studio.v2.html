<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>AIVO Studio v2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0b0c14;
      color: #ece9ff;
    }

    /* Topbar yüksekliği otomatik hesaplanacak */
    :root { --topbar-h: 0px; }

    /* === TOPBAR (placeholder) ===
       Gerçek topbar senin /studio.html içindeki <header class="aivo-topbar" id="top"> olacak.
       Bu demo’da id="top" bıraktım ki yükseklik ölçümü çalışsın. */
    #top {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(11, 12, 20, 0.72);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.06);
      padding: 14px 18px;
    }
    #top .top-inner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    #top .brand{
      font-weight:800;
      letter-spacing:.5px;
      opacity:.95;
    }
    #top .actions{
      display:flex;
      gap:10px;
      align-items:center;
    }
    #top .pill{
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.10);
      font-size: 13px;
      color: #ece9ff;
      white-space: nowrap;
    }

    /* ROOT: Topbar altta 3 kolon */
    #studioRoot {
      height: calc(100vh - var(--topbar-h));
      display: grid;
      grid-template-columns: 220px minmax(520px, 1fr) minmax(520px, 1fr);
      gap: 18px;
      padding: 18px;
    }

    /* SOL – DAR MENÜ */
    #leftMenu {
      background: #10121e;
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 18px;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      height: 100%;
    }

    #leftMenu button {
      padding: 10px 10px;
      font-size: 13px;
      border-radius: 12px;
      background: rgba(255,255,255,0.05);
      color: #ece9ff;
      border: 1px solid rgba(255,255,255,0.08);
      cursor: pointer;
      text-align: left;
    }
    #leftMenu button:hover {
      background: rgba(255,255,255,0.07);
      border-color: rgba(255,255,255,0.12);
    }

    /* ORTA – MOTOR KUTUSU (geniş) */
    #mainWorkspace {
      height: 100%;
      overflow: hidden;
      border-radius: 24px;
      background:
        radial-gradient(120% 120% at 30% 0%, #3a2a63 0%, #2a1f44 45%, #14152a 100%);
      box-shadow:
        0 20px 60px rgba(120, 80, 255, 0.15),
        inset 0 0 0 1px rgba(255,255,255,0.06);
      display: flex;
      flex-direction: column;
    }

    #mainWorkspace .box-head{
      padding: 18px 20px 10px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
    }
    #mainWorkspace .box-title{
      font-weight: 800;
      font-size: 15px;
      opacity: .95;
    }
    #mainWorkspace .box-sub{
      font-size: 12px;
      opacity: .70;
      margin-top: 4px;
    }

    #moduleHost {
      padding: 18px 20px 22px;
      overflow: auto;
      min-height: 0; /* flex overflow fix */
    }

    /* SAĞ – OUTPUTS KUTUSU (geniş) */
    #rightOutputs {
      height: 100%;
      overflow: hidden;
      border-radius: 24px;
      background: #0f111b;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
      display: flex;
      flex-direction: column;
    }

    #rightOutputs .box-head{
      padding: 18px 20px 10px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
    }
    #rightOutputs .box-title{
      font-weight: 800;
      font-size: 15px;
      opacity: .95;
    }
    #rightOutputs .box-sub{
      font-size: 12px;
      opacity: .70;
      margin-top: 4px;
    }

    #rightPanelHost {
      padding: 12px 20px 18px;
      overflow: auto;
      min-height: 0; /* flex overflow fix */
    }

    /* Responsive: küçük ekranda 2 kutu alt alta */
    @media (max-width: 1200px){
      #studioRoot{
        grid-template-columns: 220px 1fr;
        grid-template-rows: 1fr 1fr;
      }
      #mainWorkspace { grid-column: 2; grid-row: 1; }
      #rightOutputs  { grid-column: 2; grid-row: 2; }
    }

    @media (max-width: 860px){
      #studioRoot{
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
      }
      #leftMenu     { grid-column: 1; grid-row: 1; }
      #mainWorkspace{ grid-column: 1; grid-row: 2; }
      #rightOutputs { grid-column: 1; grid-row: 3; }
    }
  </style>
</head>

<body>

  <!-- Demo topbar (gerçekte senin mevcut AIVO topbar buraya gelecek) -->
  <header id="top">
    <div class="top-inner">
      <div class="brand">AIVO</div>
      <div class="actions">
        <div class="pill">Kredi <strong>211</strong></div>
        <div class="pill">Kredi Al</div>
        <div class="pill">H ▾</div>
      </div>
    </div>
  </header>

  <div id="studioRoot">

    <!-- SOL DAR -->
    <aside id="leftMenu">
      <button data-page="music">Müzik</button>
      <button data-page="video">Video</button>
      <button data-page="cover">Kapak</button>
    </aside>

    <!-- ORTA: MOTOR -->
    <main id="mainWorkspace">
      <div class="box-head">
        <div>
          <div class="box-title">AIVO Studio</div>
          <div class="box-sub">Motor alanı (form / ayarlar)</div>
        </div>
      </div>

      <div id="moduleHost">
        Henüz modül yüklenmedi
      </div>
    </main>

    <!-- SAĞ: OUTPUTS -->
    <aside id="rightOutputs">
      <div class="box-head">
        <div>
          <div class="box-title">Outputs</div>
          <div class="box-sub">Üretilenler burada</div>
        </div>
      </div>

      <!-- Right panel manager buraya mount edecek -->
      <div id="rightPanelHost">
        <!-- boş -->
      </div>
    </aside>

  </div>

  <script>
    // Topbar yüksekliğini ölç -> grid alanını otomatik aşağı al
    (function(){
      const top = document.getElementById("top");
      function setTopbarH(){
        const h = top ? Math.ceil(top.getBoundingClientRect().height) : 0;
        document.documentElement.style.setProperty("--topbar-h", h + "px");
      }
      window.addEventListener("resize", setTopbarH);
      setTopbarH();
    })();
  </script>

  <script src="/panel.manager.js?v=1" defer></script>
  <script src="/panel.audio.js?v=1" defer></script>
  <script src="/studio.router.js?v=1" defer></script>

</body>
</html>
