<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AIVO â€” BakÄ±mdayÄ±z</title>
  <meta name="robots" content="noindex,nofollow" />

  <style>
    :root{
      --bg:#050816;
      --card:#0d1024;
      --text:#f5f5ff;
      --muted:#9aa4d7;
      --accent:#6c5ce7;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:24px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      color:var(--text);
      background:
        radial-gradient(circle at top left,#222b4b 0,#050816 45%,#02030a 100%);
    }
    .card{
      width:min(760px,100%);
      background: rgba(13,16,36,.95);
      border:1px solid rgba(255,255,255,.08);
      border-radius:26px;
      padding:38px 36px;
      box-shadow:0 22px 70px rgba(0,0,0,.75);
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(108,92,231,.18);
      border:1px solid rgba(108,92,231,.35);
      padding:8px 16px;
      border-radius:999px;
      font-size:14px;
      margin-bottom:18px;
    }
    h1{
      margin:0 0 14px;
      font-size:36px;
      letter-spacing:.02em;
    }
    p{
      margin:0;
      font-size:16px;
      line-height:1.7;
      color:var(--muted);
    }
    .row{
      margin-top:26px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    input{
      padding:14px 16px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.15);
      background:#060818;
      color:#fff;
      font-size:15px;
    }
    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:14px 20px;
      border-radius:14px;
      font-weight:600;
      font-size:15px;
    }
    .btn.primary{
      background: linear-gradient(135deg,#6c5ce7,#fd79a8);
      color:#fff;
    }
    .error{
      display:none;
      color:#ff7675;
      margin-top:8px;
      font-size:14px;
    }
    .small{
      margin-top:22px;
      font-size:13px;
      color:rgba(255,255,255,.55);
    }
  </style>
</head>

<body>
  <main class="card">
    <div class="badge">ğŸ”§ BakÄ±mdayÄ±z</div>

    <h1>AIVO yakÄ±nda yayÄ±nda</h1>

    <p>
      Åu anda sistem gÃ¼ncellemesi ve son kontroller yapÄ±yoruz.
      AIVO Studioâ€™yu herkese aÃ§madan Ã¶nce son dokunuÅŸlarÄ± tamamlÄ±yoruz.
      <br /><br />
      KÄ±sa sÃ¼re iÃ§inde tekrar buradayÄ±z.
    </p>

    <div class="row">
      <button class="btn primary" type="button" onclick="location.reload()">
        SayfayÄ± Yenile
      </button>
    </div>

    <!-- ğŸ” Ã–ZEL ERÄ°ÅÄ°M -->
    <div class="row">
      <input
        type="password"
        id="aivoPassword"
        placeholder="EriÅŸim Åifresi"
        autocomplete="off"
      />
      <button class="btn primary" type="button" id="loginBtn">
        GiriÅŸ
      </button>
    </div>

    <div id="aivoError" class="error">Åifre yanlÄ±ÅŸ</div>

    <!-- Ã–DEME MESAJI -->
    <div id="paidBox"
         style="display:none; margin-top:16px; padding:14px 16px; border-radius:14px;
                border:1px solid rgba(108,92,231,.35);
                background:rgba(108,92,231,.12);">
      <div style="font-weight:700; margin-bottom:6px;">Ã–deme baÅŸarÄ±lÄ±</div>
      <div id="paidText" style="color:rgba(255,255,255,.75); font-size:14px;"></div>
    </div>

    <div class="small">Â© <span id="y"></span> AIVO</div>
  </main>

  <script>
    (function () {
      // YIL
      var y = document.getElementById("y");
      if (y) y.textContent = String(new Date().getFullYear());

      // PAID=1 KONTROL (safe)
      try {
        var url = new URL(window.location.href);
        if (url.searchParams.get("paid") === "1") {

          // aynÄ± dÃ¶nÃ¼ÅŸte iki kez Ã§alÄ±ÅŸmasÄ±n (URL bazlÄ± key)
          var paidKey = "aivo_paid_handled_" + url.pathname + url.search;
          if (sessionStorage.getItem(paidKey) !== "1") {
            sessionStorage.setItem(paidKey, "1");

            var creditsAdded = 100;

            // kredi ekle
            var currentCredits = Number(localStorage.getItem("aivo_credits") || 0);
            localStorage.setItem("aivo_credits", String(currentCredits + creditsAdded));

            // fatura ekle (safe parse)
            var invoicesKey = "aivo_invoices";
            var invoices = [];
            try {
              invoices = JSON.parse(localStorage.getItem(invoicesKey) || "[]");
              if (!Array.isArray(invoices)) invoices = [];
            } catch (e) {
              invoices = [];
            }

            invoices.unshift({
              id: "inv_" + Date.now(),
              createdAt: Date.now(),
              title: "AIVO Pro (Test)",
              amount: 199,
              currency: "TRY",
              creditsAdded: creditsAdded,
              status: "paid",
              provider: "stripe_test"
            });

            localStorage.setItem(invoicesKey, JSON.stringify(invoices));

            // mesaj
            var paidBox = document.getElementById("paidBox");
            var paidText = document.getElementById("paidText");
            if (paidBox && paidText) {
              paidBox.style.display = "block";
              paidText.textContent =
                creditsAdded + " kredi eklendi. Fatura kaydÄ±n oluÅŸturuldu.";
            }

            // URL temizle
            url.searchParams.delete("paid");
            history.replaceState({}, "", url.pathname + (url.search ? url.search : ""));
          }
        }
      } catch (err) {
        console.error("[IndexPaidReturn]", err);
      }

      // ğŸ” ÅÄ°FRELÄ° GÄ°RÄ°Å
      var PASS = "aivo2025";
      var input = document.getElementById("aivoPassword");
      var btn = document.getElementById("loginBtn");
      var err = document.getElementById("aivoError");

      function login() {
        var val = (input && input.value ? input.value : "").trim();
        if (val === PASS) {
          if (err) err.style.display = "none";

          // bakÄ±m modu iÃ§in sessionStorage daha doÄŸru
          sessionStorage.setItem("aivo_auth", "1");

          // geri tuÅŸuyla bu ekrana dÃ¶nmesin
          window.location.replace("/studio.html");
        } else {
          if (err) err.style.display = "block";
          if (input) {
            input.value = "";
            input.focus();
          }
        }
      }

      if (btn) btn.addEventListener("click", login);
      if (input) {
        input.addEventListener("keydown", function (e) {
          if (e.key === "Enter") login();
        });
      }
    })();
  </script>
</body>
</html>
