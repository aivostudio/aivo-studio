<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AIVO â€“ YakÄ±nda</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/index.css?v=10" />
  <link rel="stylesheet" href="/auth.modal.css?v=10" />
  <link rel="stylesheet" href="/products.dropdown.css?v=14" />


  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- JS -->
  <script src="/index.auth.js?v=1" defer></script>
</head>

<body>

  <!-- ================= AIVO TOPBAR (TEK) ================= -->
  <header class="aivo-topbar" id="top">
    <div class="container aivo-topbar-inner">

      <!-- LOGO -->
      <a class="aivo-brand" href="/" aria-label="AIVO">
        <img class="aivo-brand-logo" src="/aivo-logo.png" alt="AIVO" />
      </a>

     <!-- NAV -->
<nav class="aivo-nav" aria-label="Ãœst menÃ¼">

  <!-- ÃœRÃœNLER -->
  <div class="nav-item has-dropdown" id="navProducts">
    <button class="nav-link" type="button" aria-haspopup="true" aria-expanded="false">
      ÃœrÃ¼nler <span class="chevron">â–¾</span>
    </button>

    <div class="dropdown dropdown--products" aria-label="ÃœrÃ¼nler menÃ¼sÃ¼">
      <div class="products-menu">

        <a href="/studio.html" data-auth="required" class="product-card" data-mod="music">
          <span class="pc-ico">â™«</span>
          <span class="pc-txt">
            <span class="pc-title">AI MÃ¼zik</span>
            <span class="pc-sub">TÃ¼rkÃ§e odaklÄ±, hÄ±zlÄ± Ã¼retim</span>
          </span>
        </a>

        <a href="/studio.html" data-auth="required" class="product-card" data-mod="visual">
          <span class="pc-ico">â–¦</span>
          <span class="pc-txt">
            <span class="pc-title">AI Kapak / GÃ¶rsel</span>
            <span class="pc-sub">Kapak, afiÅŸ, gÃ¶rsel iÃ§erik</span>
          </span>
        </a>

        <a href="/studio.html" data-auth="required" class="product-card" data-mod="video">
          <span class="pc-ico">â–¶</span>
          <span class="pc-txt">
            <span class="pc-title">AI Video</span>
            <span class="pc-sub">Sosyal medya uyumlu Ã§Ä±ktÄ±lar</span>
          </span>
        </a>

      </div>
    </div>
  </div>
  <!-- /ÃœRÃœNLER -->

<!-- KURUMSAL -->
<div class="nav-item has-dropdown" id="navCorp">
  <button class="nav-link" type="button" aria-haspopup="true" aria-expanded="false">
    Kurumsal <span class="chevron">â–¾</span>
  </button>

  <div class="dropdown dropdown--corp" aria-label="Kurumsal menÃ¼sÃ¼">
    <div class="corp-menu">
      <div class="corp-grid">

        <a href="#hakkimizda" class="corp-card">
          <span class="cc-ico">â“˜</span>
          <span class="cc-txt">
            <span class="cc-title">HakkÄ±mÄ±zda</span>
            <span class="cc-sub">AIVOâ€™nun hikayesi</span>
          </span>
        </a>

        <a href="#ozellikler" class="corp-card">
          <span class="cc-ico">âš™ï¸</span>
          <span class="cc-txt">
            <span class="cc-title">Ã–zellikler</span>
            <span class="cc-sub">Neler sunuyoruz</span>
          </span>
        </a>

        <a href="#gizlilik" class="corp-card">
          <span class="cc-ico">ğŸ”’</span>
          <span class="cc-txt">
            <span class="cc-title">Gizlilik PolitikasÄ±</span>
            <span class="cc-sub">KVKK / GDPR</span>
          </span>
        </a>

        <a href="#mesafeli-satis" class="corp-card">
          <span class="cc-ico">ğŸ“„</span>
          <span class="cc-txt">
            <span class="cc-title">Mesafeli SatÄ±ÅŸ</span>
            <span class="cc-sub">SÃ¶zleÅŸme metni</span>
          </span>
        </a>

        <a href="#iletisim" class="corp-card">
          <span class="cc-ico">âœ‰ï¸</span>
          <span class="cc-txt">
            <span class="cc-title">Ä°letiÅŸim</span>
            <span class="cc-sub">Destek & bilgi</span>
          </span>
        </a>

        <!-- âœ… 6. KART (BOÅLUÄU DOÄAL DOLDURUR) -->
        <a href="#destek" class="corp-card">
          <span class="cc-ico">â“</span>
          <span class="cc-txt">
            <span class="cc-title">Destek Merkezi</span>
            <span class="cc-sub">YardÄ±m & sÄ±k sorulan sorular</span>
          </span>
        </a>

      </div>
    </div>
  </div>
</div>
<!-- /KURUMSAL -->


  <!-- FÄ°YATLANDIRMA (dropdown deÄŸil, dÃ¼z link) -->
  <a class="nav-link" href="#pricing">FiyatlandÄ±rma</a>

</nav>
<!-- /NAV -->


      <!-- AUTH -->
      <div class="aivo-auth">

        <!-- GUEST -->
        <div class="auth-guest" id="authGuest">
          <button id="btnLoginTop" class="btn btn-ghost" type="button">GiriÅŸ Yap</button>
          <button id="btnRegisterTop" class="btn btn-primary" type="button">KayÄ±t Ol</button>
        </div>

        <!-- USER -->
        <div class="auth-user" id="authUser" style="display:none">
          <span class="user-email" id="topUserEmail"></span>
          <button id="btnLogoutTop" class="btn btn-ghost" type="button">Ã‡Ä±kÄ±ÅŸ Yap</button>
        </div>

      </div>

    </div>
  </header>
<!-- ================= HERO ================= -->
<section class="hero">
  <div class="container hero-inner">
    <div class="hero-left">
      <div class="badge">
        <span class="dot"></span>
        Premium kalite â€¢ Daha uygun fiyat
      </div>

      <h1 class="hero-title">
        Ä°lhamÄ± Ã¼retime dÃ¶nÃ¼ÅŸtÃ¼r.
        <span class="swap-word" id="heroSwap">MÃ¼zik</span>
      </h1>

      <p class="hero-sub" id="heroSub">
        TarzÄ±nÄ± yaz. AIVO stÃ¼dyo kalitesinde Ã¼retim yapsÄ±n.
      </p>
<div class="hero-actions">
  <a class="btn btn-primary" href="/studio.html" data-auth="required">Studioâ€™ya Gir</a>
  <a class="btn btn-ghost" href="#fiyatlar">FiyatlarÄ± GÃ¶r</a>
  <a class="btn btn-link" href="#nasil-calisir">NasÄ±l Ã§alÄ±ÅŸÄ±r?</a>
</div>

<!-- HERO BENEFITS (RENK SENKRONLU) -->
<div class="hero-benefits" id="heroBenefits">
  <span class="hb-item" data-hb="1">
    <span class="hb-check">âœ“</span>
    <span class="hb-text">Ãœcretsiz deneme: 5 Ã¼retim</span>
  </span>

  <span class="hb-item" data-hb="2">
    <span class="hb-check">âœ“</span>
    <span class="hb-text">Telif ve kullanÄ±m haklarÄ± sende</span>
  </span>

  <span class="hb-item" data-hb="3">
    <span class="hb-check">âœ“</span>
    <span class="hb-text">AnÄ±nda indir, paylaÅŸ</span>
  </span>
</div>
<!-- /HERO BENEFITS -->

    <!-- /HERO BENEFITS -->

    </div>

    <div class="hero-right" aria-hidden="true">
      <div class="orb">
        <span class="orb-fog"></span>
        <span class="orb-fog orb-fog--2"></span>
        <canvas class="orb-canvas" aria-hidden="true"></canvas>
      </div>
    </div>

    <a class="scroll-hint" href="#nasil-calisir" aria-label="AÅŸaÄŸÄ± kaydÄ±r">
      <span class="mouse"></span>
      <span class="scroll-text">AÅŸaÄŸÄ± kaydÄ±r</span>
      <span class="arrow">â†“</span>
    </a>
  </div>
</section>
<!-- ================= /HERO ================= -->





  <!-- ================= SECTIONS ================= -->
  <div class="aivo-main">

    <!-- 1) Ã–zellikler -->
    <section class="aivo-section" id="ozellikler">
      <div class="aivo-wrap">
        <h2 class="aivo-h2">Ã–zellikler</h2>
        <p class="aivo-p">TÃ¼rkÃ§e sÃ¶z, modern prodÃ¼ksiyon ve hÄ±zlÄ± Ã§Ä±ktÄ±.</p>

        <div class="aivo-grid-3">
          <article class="aivo-card">
            <h3>TÃ¼rkÃ§e odak</h3>
            <p>TÃ¼rkÃ§e hece/aksan uyumu hedefli Ã¼retim.</p>
          </article>
          <article class="aivo-card">
            <h3>StÃ¼dyo kalite</h3>
            <p>Modern miks hissi, temiz vokal yaklaÅŸÄ±mÄ±.</p>
          </article>
          <article class="aivo-card">
            <h3>HÄ±zlÄ± iÅŸ akÄ±ÅŸÄ±</h3>
            <p>Prompt â†’ Ã¼ret â†’ varyasyon â†’ indir.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- 2) NasÄ±l Ã§alÄ±ÅŸÄ±r -->
    <section class="aivo-section" id="nasil-calisir">
      <div class="aivo-wrap">
        <h2 class="aivo-h2">NasÄ±l Ã§alÄ±ÅŸÄ±r?</h2>
        <div class="aivo-steps">
          <div class="aivo-step"><span>01</span><b>TarzÄ± seÃ§</b><p>TÃ¼r/duygu/enstrÃ¼man.</p></div>
          <div class="aivo-step"><span>02</span><b>Prompt yaz</b><p>KÄ±sa ve net yÃ¶nergeler.</p></div>
          <div class="aivo-step"><span>03</span><b>Ãœret & dÃ¼zenle</b><p>Varyasyon ve ince ayar.</p></div>
          <div class="aivo-step"><span>04</span><b>Ä°ndir</b><p>Projeni dÄ±ÅŸa aktar.</p></div>
        </div>
      </div>
    </section>

    <!-- 3) FiyatlandÄ±rma -->
    <section class="aivo-section" id="fiyatlar">
      <div class="aivo-wrap">
        <div class="aivo-split">
          <div>
            <h2 class="aivo-h2">FiyatlandÄ±rma</h2>
            <p class="aivo-p">Kredi bazlÄ±, net ve sÃ¼rdÃ¼rÃ¼lebilir.</p>
            <div class="aivo-btnrow">
              <a class="aivo-btn primary" href="/studio.html" data-auth="required">Studioâ€™ya Gir</a>
              <a class="aivo-btn ghost" href="#top">YukarÄ±</a>
            </div>
          </div>
          <div class="aivo-box">
            <b>Not</b>
            <p>Ã–deme tarafÄ±nda TÃ¼rkiye odaklÄ± PayTR / iyzico planÄ± korunuyor.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 4) SSS -->
    <section class="aivo-section" id="sss">
      <div class="aivo-wrap">
        <h2 class="aivo-h2">SÄ±k sorulanlar</h2>
        <div class="aivo-faq">
          <details class="aivo-faq-item">
            <summary>Krediler nasÄ±l Ã§alÄ±ÅŸÄ±r?</summary>
            <p>Her Ã¼retim aksiyonu kredi tÃ¼ketir; paketler kredi olarak satÄ±n alÄ±nÄ±r.</p>
          </details>
          <details class="aivo-faq-item">
            <summary>TÃ¼rkÃ§e sÃ¶z Ã¼retebiliyor mu?</summary>
            <p>Hedefimiz TÃ¼rkÃ§e odaklÄ± Ã¼retim kalitesini sÃ¼rekli yÃ¼kseltmek.</p>
          </details>
        </div>
      </div>
    </section>

  </div>
  <!-- /aivo-main -->

  <!-- ================= MODÃœLLER / CTA ================= -->
  <section class="aivo-modules" id="modules">
    <div class="aivo-wrap">

      <div class="aivo-modules-head">
        <div class="aivo-pill">AI YaratÄ±cÄ±lÄ±k Platformu</div>
        <h2 class="aivo-modules-title">YaratÄ±cÄ±lÄ±k YolculuÄŸunuza BaÅŸlayÄ±n</h2>
        <p class="aivo-modules-sub">
          Yapay zeka ile mÃ¼zik, kapak ve video Ã¼retmenin sÄ±nÄ±rsÄ±z dÃ¼nyasÄ±nÄ± keÅŸfedin.
          Fikrinizi saniyeler iÃ§inde Ã¼retime dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n.
        </p>
      </div>

      <div class="aivo-modules-grid">

<!-- MÃœZÄ°K -->
<article class="aivo-module-card is-music">
  <div class="aivo-module-ico">â™ª</div>
  <h3>MÃ¼zik Ãœret</h3>
  <p>TarzÄ± seÃ§, prompt yaz, Ã¼ret ve varyasyonlarla zenginleÅŸtir.</p>
  <ul>
    <li>AnÄ±nda Ã¼retim</li>
    <li>Profesyonel kalite hedefi</li>
    <li>TÃ¼rkÃ§e odak</li>
  </ul>
  <a
    class="aivo-module-btn"
    href="/studio.html"
    data-auth="required"
    data-gate="studio"
  >
    MÃ¼zik Ãœret â†’
  </a>
</article>

<!-- KAPAK -->
<article class="aivo-module-card is-art">
  <div class="aivo-module-ico">â–¦</div>
  <h3>Kapak Ãœret</h3>
  <p>AlbÃ¼m kapaÄŸÄ±, afiÅŸ ve gÃ¶rsel iÃ§erikler iÃ§in tek tÄ±kla Ã¼retim.</p>
  <ul>
    <li>YÃ¼ksek Ã§Ã¶zÃ¼nÃ¼rlÃ¼k</li>
    <li>Stil kontrolÃ¼</li>
    <li>Ticari kullanÄ±m hedefi</li>
  </ul>
  <a
    class="aivo-module-btn"
    href="/studio.html"
    data-auth="required"
    data-gate="studio"
  >
    Kapak Ãœret â†’
  </a>
</article>

<!-- VÄ°DEO -->
<article class="aivo-module-card is-video">
  <div class="aivo-module-ico">â–¸</div>
  <h3>Video Ãœret</h3>
  <p>Metinden veya gÃ¶rselden, sosyal medyaya uygun video Ã§Ä±ktÄ±larÄ±.</p>
  <ul>
    <li>HD Ã§Ä±ktÄ± hedefi</li>
    <li>HÄ±zlÄ± render akÄ±ÅŸÄ±</li>
    <li>Kolay paylaÅŸÄ±m</li>
  </ul>
  <a
    class="aivo-module-btn"
    href="/studio.html"
    data-auth="required"
    data-gate="studio"
  >
    Video Ãœret â†’
  </a>
</article>

</div><!-- /aivo-modules-grid -->

<div class="aivo-modules-cta">
  <span class="aivo-cta-note">Ãœcretsiz 5 kredi ile baÅŸlayÄ±n</span>
  <a
    class="aivo-cta-big"
    href="/studio.html"
    data-auth="required"
    data-gate="studio"
  >
    Hemen BaÅŸla â€“ Tamamen Ãœcretsiz âœ¨
  </a>
</div>



  <!-- ================= FOOTER ================= -->
  <footer class="aivo-footer" id="footer">
    <div class="aivo-wrap aivo-footer-top">

      <div class="aivo-footer-brand">
        <div class="aivo-footer-logo">AIVO</div>
        <p>TÃ¼rkÃ§e odaklÄ± AI mÃ¼zik Ã¼retiminde yeni bir standart.</p>
        <div class="aivo-social">
          <a href="#" aria-label="X">X</a>
          <a href="#" aria-label="Instagram">IG</a>
          <a href="#" aria-label="LinkedIn">in</a>
          <a href="#" aria-label="GitHub">GH</a>
        </div>
      </div>

      <div class="aivo-footer-col">
        <h4>HÄ±zlÄ± Linkler</h4>
        <a href="#top">Ana Sayfa</a>
        <a href="#ozellikler">Ã–zellikler</a>
        <a href="#fiyatlar">FiyatlandÄ±rma</a>
        <a href="/studio.html" data-auth="required">Dashboard</a>
      </div>

      <div class="aivo-footer-col">
        <h4>Kurumsal</h4>
        <a href="/kurumsal/hakkimizda">HakkÄ±mÄ±zda</a>
        <a href="/kurumsal/ozellikler">Ã–zellikler</a>
        <a href="/kurumsal/gizlilik">Gizlilik PolitikasÄ±</a>
        <a href="/kurumsal/mesafeli-satis">Mesafeli SatÄ±ÅŸ SÃ¶zleÅŸmesi</a>
        <a href="/kurumsal/iletisim">Ä°letiÅŸim</a>
      </div>

      <div class="aivo-footer-right">
        <div class="aivo-badges">
          <div class="aivo-badge">PAYTR / iyzico<br><small>GÃ¼venli Ã¶deme</small></div>
          <div class="aivo-badge">VISA â€¢ MC â€¢ TROY<br><small>256-bit SSL</small></div>
          <div class="aivo-badge">ETBÄ°S<br><small>(Åirket sonrasÄ±)</small></div>
        </div>

        <div class="aivo-contact">
          <h4>Ä°letiÅŸim</h4>
          <a href="mailto:info@aivo.tr">info@aivo.tr</a>
        </div>
      </div>

    </div>

    <div class="aivo-wrap aivo-footer-bottom">
      <div>Â© 2025 AIVO. TÃ¼m haklarÄ± saklÄ±dÄ±r.</div>
      <div class="aivo-status">Durum: <span class="dot"></span> Aktif</div>
    </div>
  </footer>

 <!-- ================= LOGIN MODAL (AUTH GATE) ================= -->
<div class="login-modal" id="loginModal" aria-hidden="true">
  <div class="login-backdrop" data-close="1"></div>

  <div class="login-panel" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
    <div class="login-card login-header">
      <button class="login-x" type="button" data-close="1" aria-label="Kapat">Ã—</button>
      <h3 id="loginTitle">Tekrar hoÅŸ geldin ğŸ‘‹</h3>
      <p class="login-desc">AIVO Studioâ€™ya eriÅŸmek iÃ§in giriÅŸ yap veya Ã¼cretsiz hesap oluÅŸtur.</p>
    </div>

    <div class="login-card login-google">
      <div class="card-title">HÄ±zlÄ± GiriÅŸ</div>
      <div class="card-sub">Google hesabÄ±nla tek tÄ±kla devam et.</div>
      <button id="btnGoogleLogin" type="button" class="btn-google">Google ile GiriÅŸ Yap</button>
    </div>

    <div class="login-card login-email">
      <div class="card-title">Email ile GiriÅŸ</div>
      <div class="card-sub">HesabÄ±na email adresinle giriÅŸ yap.</div>

      <div class="email-row email-row-2">
        <input id="loginEmail" type="email" placeholder="ornek@aivo.tr" autocomplete="email" />
        <input id="loginPass" type="password" placeholder="Åifre" autocomplete="current-password" />
      </div>

      <button id="btnLogin" type="button" class="btn-primary btn-login-full">GiriÅŸ Yap</button>
      <a href="#" id="forgotPass" class="link-muted">Åifreni mi unuttun?</a>
    </div>

    <div class="login-card login-footer">
      <span>AIVOâ€™da yeni misin?</span>
      <a href="#" id="goRegister" class="link-accent">Ãœcretsiz hesap oluÅŸtur ve 5 kredi kazan â†’</a>
    </div>
  </div>
</div>


<script>
(() => {
  // âœ… TEK KERE Ã§alÄ±ÅŸsÄ±n (hero swap + orb fx aynÄ± blokta)
  if (window.__AIVO_INDEX_FX__) return;
  window.__AIVO_INDEX_FX__ = true;

  const root   = document.documentElement;
  const elWord = document.getElementById("heroSwap");
  const elSub  = document.getElementById("heroSub");

  const rand = (a,b)=> a + Math.random()*(b-a);

  function hexToRgb(hex){
    const h = (hex || "").replace("#","").trim();
    if (h.length !== 6) return { r:255, g:255, b:255 };
    return {
      r: parseInt(h.slice(0,2),16),
      g: parseInt(h.slice(2,4),16),
      b: parseInt(h.slice(4,6),16),
    };
  }

  function getVarHex(name, fallback){
    const v = getComputedStyle(root).getPropertyValue(name).trim();
    return (v && v.startsWith("#") && v.length === 7) ? v : fallback;
  }

  /* =========================
     1) HERO SWAP + THEME
     ========================= */
  const THEMES = [
    { key:"music",  word:"MÃ¼zik",  sub:"TarzÄ±nÄ± yaz. AIVO stÃ¼dyo kalitesinde Ã¼retim yapsÄ±n.", accent:"#6F63FF", grad1:"#7C6BFF", grad2:"#2FB7FF" },
    { key:"video",  word:"Video",  sub:"Senaryonu yaz. AIVO sahneleri otomatik kurgulasÄ±n.", accent:"#2FB7FF", grad1:"#2FB7FF", grad2:"#6F63FF" },
    { key:"visual", word:"GÃ¶rsel", sub:"Prompt ver. AIVO kapak ve gÃ¶rselleri saniyeler iÃ§inde Ã¼retsin.", accent:"#9B7CFF", grad1:"#9B7CFF", grad2:"#2FB7FF" },
  ];

  let i = 0;
  const HOLD_MS = 2600;
  const FADE_MS = 260;
  const IN_MS   = 300;

  function applyTheme(t){
    root.dataset.hero = t.key;
    root.style.setProperty("--heroAccent", t.accent);
    root.style.setProperty("--heroGrad1",  t.grad1);
    root.style.setProperty("--heroGrad2",  t.grad2);

    // subtitle rengi accent'ten tÃ¼resin
    const { r,g,b } = hexToRgb(t.accent);
    root.style.setProperty("--heroSubColor", `rgba(${r},${g},${b},0.55)`);

    if (elWord) elWord.textContent = t.word;
    if (elSub)  elSub.textContent  = t.sub;
  }

  function tick(){
    if (!elWord) return;

    elWord.classList.add("swap-out");
    if (elSub) elSub.classList.add("swap-out");

    setTimeout(() => {
      i = (i + 1) % THEMES.length;
      applyTheme(THEMES[i]);

      elWord.classList.remove("swap-out");
      elWord.classList.add("swap-in");

      if (elSub){
        elSub.classList.remove("swap-out");
        elSub.classList.add("swap-in");
      }

      setTimeout(() => {
        elWord.classList.remove("swap-in");
        if (elSub) elSub.classList.remove("swap-in");
        setTimeout(tick, HOLD_MS);
      }, IN_MS);

    }, FADE_MS);
  }

  if (elWord){
    applyTheme(THEMES[i]);
    setTimeout(tick, HOLD_MS);
  }

  /* =========================
     2) ORB CANVAS (GRADIENT + LIGHTNING + SMOKE)
     ========================= */
  const canvas = document.querySelector(".orb .orb-canvas");
  if (!canvas) return;

  const ctx = canvas.getContext("2d", { alpha:true });

  function resize(){
    const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    const r = canvas.getBoundingClientRect();
    canvas.width  = Math.max(1, Math.floor(r.width  * dpr));
    canvas.height = Math.max(1, Math.floor(r.height * dpr));
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }

  function circleClip(w,h){
    const cx=w/2, cy=h/2, R=Math.min(w,h)/2;
    ctx.save();
    ctx.beginPath();
    ctx.arc(cx,cy,R,0,Math.PI*2);
    ctx.clip();
    return { cx, cy, R };
  }

  // Midpoint displacement bolt
  function buildBolt(from, to, displace, detail){
    const pts = [from, to];
    let d = displace;

    for (let k=0;k<detail;k++){
      const next = [pts[0]];
      for (let j=0;j<pts.length-1;j++){
        const a = pts[j], b = pts[j+1];
        const mx = (a.x+b.x)/2, my = (a.y+b.y)/2;

        const dx = b.x-a.x, dy = b.y-a.y;
        const len = Math.hypot(dx,dy) || 1;
        const nx = -dy/len, ny = dx/len;

        const off = rand(-d, d);
        next.push({ x: mx + nx*off, y: my + ny*off });
        next.push(b);
      }
      pts.splice(0, pts.length, ...next);
      d *= 0.56;
    }
    return pts;
  }

  function edgePoint(w,h){
    const cx=w/2, cy=h/2;
    const a = rand(0, Math.PI*2);
    const R = Math.min(w,h)*0.49;
    return { x: cx + Math.cos(a)*R, y: cy + Math.sin(a)*R };
  }

  function makeBranches(mainPts, w,h){
    const out = [];
    const bn = 4; // daha dolu
    for (let k=0;k<bn;k++){
      const idx = Math.floor(rand(mainPts.length*0.20, mainPts.length*0.82));
      const p = mainPts[idx];
      const to = edgePoint(w,h);
      out.push(buildBolt(p, to, Math.min(w,h)*0.16, 7));
    }
    return out;
  }

  function strokeBolt(pts, glowRgb, a){
    ctx.lineCap="round";
    ctx.lineJoin="round";

    // dÄ±ÅŸ glow (accent)
    ctx.globalCompositeOperation = "lighter";

    ctx.strokeStyle = `rgba(${glowRgb.r},${glowRgb.g},${glowRgb.b},${0.22*a})`;
    ctx.lineWidth = 28;
    ctx.beginPath();
    ctx.moveTo(pts[0].x, pts[0].y);
    for (let i=1;i<pts.length;i++) ctx.lineTo(pts[i].x, pts[i].y);
    ctx.stroke();

    ctx.strokeStyle = `rgba(${glowRgb.r},${glowRgb.g},${glowRgb.b},${0.35*a})`;
    ctx.lineWidth = 16;
    ctx.stroke();

    // beyaz core (senin istediÄŸin: beyaz kalsÄ±n)
    ctx.strokeStyle = `rgba(255,255,255,${0.98*a})`;
    ctx.lineWidth = 3.6;
    ctx.stroke();

    ctx.globalCompositeOperation = "source-over";
  }

  // Smoke particles (outside the orb)
  const smoke = [];
  function spawnSmoke(cx,cy,R){
    const a = rand(0, Math.PI*2);
    const x = cx + Math.cos(a)*(R + rand(6, 18));
    const y = cy + Math.sin(a)*(R + rand(6, 18));
    smoke.push({
      x, y,
      vx: Math.cos(a)*rand(0.06, 0.18),
      vy: Math.sin(a)*rand(0.06, 0.18),
      r: rand(18, 48),
      life: rand(120, 220),
      t: 0,
      alpha: rand(0.06, 0.12)
    });
    if (smoke.length > 70) smoke.splice(0, smoke.length - 70);
  }

  function drawSmoke(){
    if (!smoke.length) return;

    ctx.save();
    ctx.globalCompositeOperation = "screen";
    ctx.filter = "blur(10px)";

    for (let i=smoke.length-1;i>=0;i--){
      const p = smoke[i];
      p.t += 1;
      p.x += p.vx;
      p.y += p.vy;
      p.r *= 1.0025;

      const k = 1 - (p.t / p.life);
      const a = Math.max(0, p.alpha * k);

      ctx.fillStyle = `rgba(170,190,255,${a})`;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();

      if (p.t >= p.life) smoke.splice(i,1);
    }

    ctx.filter = "none";
    ctx.restore();
  }

  // Timing
  let nextStrike = 0;
  let flash = 0;
  let main = null;
  let branches = [];

  function getAccentRGB(){
    const hex = getVarHex("--heroAccent", "#6F63FF");
    return hexToRgb(hex);
  }

  function strike(now, w,h){
    // merkezden Ã§Ä±kar (tam istediÄŸin)
    const from = { x: w/2 + rand(-10, 10), y: h/2 + rand(-10, 10) };

    // 1 ana + 1 ikinci ana (daha gÃ¼Ã§lÃ¼ â€œfoto hissiâ€)
    const to1 = edgePoint(w,h);
    const to2 = edgePoint(w,h);

    main = buildBolt(from, to1, Math.min(w,h)*0.30, 9);
    branches = makeBranches(main, w,h);

    // ekstra ikinci Ã§izgi (aynÄ± anda)
    const secondary = buildBolt(from, to2, Math.min(w,h)*0.26, 8);
    branches.push(secondary);

    flash = 1;

    // arada Ã§ift Ã§akma
    nextStrike = now + (Math.random() < 0.45 ? rand(90, 190) : rand(520, 1100));
  }

  function drawInnerGradient(now, cx,cy,R){
    // Ä°Ã§ gradient â€œdÃ¶nÃ¼yormuÅŸâ€ gibi: iki Ä±ÅŸÄ±k kaynaÄŸÄ± orbit yapÄ±yor
    const g1 = hexToRgb(getVarHex("--heroGrad1", "#7C6BFF"));
    const g2 = hexToRgb(getVarHex("--heroGrad2", "#2FB7FF"));

    const t = now * 0.00025;
    const ax = cx + Math.cos(t) * (R*0.55);
    const ay = cy + Math.sin(t) * (R*0.55);
    const bx = cx + Math.cos(t + 2.2) * (R*0.55);
    const by = cy + Math.sin(t + 2.2) * (R*0.55);

    // base fill
    const base = ctx.createRadialGradient(cx, cy, R*0.05, cx, cy, R);
    base.addColorStop(0, `rgba(255,255,255,0.08)`);
    base.addColorStop(1, `rgba(0,0,0,0)`);
    ctx.fillStyle = base;
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, Math.PI*2);
    ctx.fill();

    // light A
    const A = ctx.createRadialGradient(ax, ay, R*0.02, cx, cy, R*1.05);
    A.addColorStop(0, `rgba(${g1.r},${g1.g},${g1.b},0.45)`);
    A.addColorStop(1, `rgba(${g1.r},${g1.g},${g1.b},0)`);
    ctx.fillStyle = A;
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, Math.PI*2);
    ctx.fill();

    // light B
    const B = ctx.createRadialGradient(bx, by, R*0.02, cx, cy, R*1.05);
    B.addColorStop(0, `rgba(${g2.r},${g2.g},${g2.b},0.45)`);
    B.addColorStop(1, `rgba(${g2.r},${g2.g},${g2.b},0)`);
    ctx.fillStyle = B;
    ctx.beginPath();
    ctx.arc(cx, cy, R, 0, Math.PI*2);
    ctx.fill();
  }

  function frame(now){
    const r = canvas.getBoundingClientRect();
    const w = r.width, h = r.height;

    ctx.clearRect(0,0,w,h);

    // --- Inside orb (clipped) ---
    const { cx, cy, R } = circleClip(w,h);

    // Ä°Ã§ renk akÄ±ÅŸÄ± / dÃ¶nÃ¼ÅŸ
    drawInnerGradient(now, cx,cy,R);

    // Strike timing
    if (!nextStrike) nextStrike = now + rand(220, 520);
    if (now >= nextStrike) strike(now, w,h);

    if (flash > 0 && main){
      const accent = getAccentRGB();
      const a = flash * (0.82 + 0.18*Math.random());

      // hÄ±zlÄ± â€œflashâ€ overlay
      ctx.globalCompositeOperation = "lighter";
      ctx.fillStyle = `rgba(255,255,255,${0.045*a})`;
      ctx.beginPath();
      ctx.arc(cx, cy, R*1.02, 0, Math.PI*2);
      ctx.fill();
      ctx.globalCompositeOperation = "source-over";

      // bolts
      strokeBolt(main, accent, a);
      for (const b of branches) strokeBolt(b, accent, 0.70*a);

      // gerÃ§ek gibi hÄ±zlÄ± sÃ¶nÃ¼m
      flash *= 0.60;
      if (flash < 0.02) flash = 0;
    }

    ctx.restore(); // clip out

    // --- Smoke outside orb ---
    // daha yoÄŸun: her frame %35 ihtimalle yeni duman
    if (Math.random() < 0.35) spawnSmoke(cx,cy,R);
    drawSmoke();

    requestAnimationFrame(frame);
  }

  resize();
  window.addEventListener("resize", resize, { passive:true });
  requestAnimationFrame(frame);
})();
</script>

</body>
</html>

