/* =========================================================
   AIVO Studio v2 — ATMOSPHERE MODULE (NEW HTML)
   Scope: section.main-panel[data-module="atmosphere"]
   Goal: original “premium + compact + orderly” look
   Notes:
   - Works with your posted HTML (class-based)
   - No legacy IDs required
   ========================================================= */

section.main-panel[data-module="atmosphere"]{
  --a-bg0: rgba(10,14,28,.78);
  --a-bg1: rgba(10,14,28,.58);
  --a-bg2: rgba(10,14,28,.38);
  --a-b: rgba(255,255,255,.09);
  --a-b2: rgba(160,110,255,.18);
  --a-t: rgba(255,255,255,.92);
  --a-m: rgba(255,255,255,.72);
  --a-s: rgba(255,255,255,.56);
  --a-chip: rgba(255,255,255,.06);
  --a-chipb: rgba(255,255,255,.10);
  --a-glow: rgba(120,80,255,.10);
  --a-r: 18px;
  --a-r2: 14px;
  --a-p: 16px;
  --a-g: 12px;
}

/* ---------- overall layout polish ---------- */
section.main-panel[data-module="atmosphere"] .panel-header{
  margin-bottom: 12px;
}

section.main-panel[data-module="atmosphere"] .page-head{
  background: linear-gradient(180deg, rgba(28,18,55,.58), rgba(20,14,40,.68));
  border: 1px solid rgba(160,110,255,.16);
  border-radius: 20px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.05),
    0 14px 34px rgba(0,0,0,.45);
  padding: 18px 18px;
}

section.main-panel[data-module="atmosphere"] .page-head__title{
  margin: 0;
  font-size: 18px;
  line-height: 1.15;
  color: var(--a-t);
  letter-spacing: .2px;
}

section.main-panel[data-module="atmosphere"] .page-head__sub{
  margin: 6px 0 0;
  font-size: 13px;
  line-height: 1.25;
  color: var(--a-m);
}

/* ---------- mode shell + tabs ---------- */
section.main-panel[data-module="atmosphere"] .mode-shell{
  margin-top: 12px;
}

section.main-panel[data-module="atmosphere"] .mode-switch{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  padding: 10px;
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,.08);
  background:
    radial-gradient(900px 240px at 50% -60%, rgba(160,110,255,.12), transparent 60%),
    rgba(0,0,0,.20);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
}

section.main-panel[data-module="atmosphere"] .mode-tab{
  appearance: none;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color: rgba(255,255,255,.78);
  height: 44px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 13px;
  letter-spacing: .2px;
  cursor: pointer;
  transition: transform .15s ease, border-color .15s ease, background .15s ease, box-shadow .15s ease;
}

section.main-panel[data-module="atmosphere"] .mode-tab:hover{
  border-color: rgba(160,110,255,.22);
  box-shadow: 0 14px 28px rgba(120,80,255,.08);
  transform: translateY(-1px);
}

section.main-panel[data-module="atmosphere"] .mode-tab.is-active{
  background: linear-gradient(180deg, rgba(120,80,255,.22), rgba(120,80,255,.10));
  border-color: rgba(160,110,255,.35);
  color: rgba(255,255,255,.92);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 18px 34px rgba(120,80,255,.10);
}

/* ---------- panels ---------- */
section.main-panel[data-module="atmosphere"] .mode-panel{
  display: none;
  margin-top: 12px;
}

section.main-panel[data-module="atmosphere"] .mode-panel.is-active{
  display: block;
}

/* ---------- card base ---------- */
section.main-panel[data-module="atmosphere"] .card{
  background: linear-gradient(180deg, var(--a-bg1), var(--a-bg2));
  border: 1px solid var(--a-b);
  border-radius: var(--a-r);
  padding: var(--a-p);
  margin-top: 12px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.04),
    0 12px 32px rgba(0,0,0,.38);
}

section.main-panel[data-module="atmosphere"] .card-header{
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

section.main-panel[data-module="atmosphere"] .card-title{
  font-size: 15px;
  line-height: 1.15;
  font-weight: 900;
  color: var(--a-t);
  letter-spacing: .2px;
}

section.main-panel[data-module="atmosphere"] .card-subtitle{
  margin-top: 4px;
  font-size: 12.5px;
  line-height: 1.25;
  color: var(--a-m);
}

/* CTA card tighter */
section.main-panel[data-module="atmosphere"] .smpack-card--cta{
  padding: 14px;
}

/* ---------- buttons (generic) ---------- */
section.main-panel[data-module="atmosphere"] .btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.86);
  font-weight: 800;
  font-size: 13px;
  cursor: pointer;
  user-select: none;
  transition: transform .15s ease, border-color .15s ease, background .15s ease, box-shadow .15s ease;
}

section.main-panel[data-module="atmosphere"] .btn:hover{
  border-color: rgba(160,110,255,.22);
  box-shadow: 0 14px 28px rgba(120,80,255,.08);
  transform: translateY(-1px);
}

section.main-panel[data-module="atmosphere"] .btn:active{
  transform: translateY(0px);
}

section.main-panel[data-module="atmosphere"] .btn.btn-primary{
  border: 1px solid rgba(160,110,255,.30);
  background: linear-gradient(180deg, rgba(120,80,255,.30), rgba(120,80,255,.14));
  color: rgba(255,255,255,.95);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 16px 32px rgba(120,80,255,.12);
}

/* ---------- scene choices grid ---------- */
section.main-panel[data-module="atmosphere"] .smpack-grid{
  display: grid;
  gap: 10px;
}

section.main-panel[data-module="atmosphere"] .smpack-grid--themes{
  grid-template-columns: repeat(4, minmax(0,1fr));
}

@media (max-width: 1100px){
  section.main-panel[data-module="atmosphere"] .smpack-grid--themes{
    grid-template-columns: repeat(2, minmax(0,1fr));
  }
}

section.main-panel[data-module="atmosphere"] .smpack-choice{
  appearance: none;
  border: 1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(900px 220px at 50% -60%, rgba(160,110,255,.10), transparent 60%),
    rgba(255,255,255,.04);
  color: rgba(255,255,255,.84);
  border-radius: 16px;
  padding: 12px 12px;
  font-weight: 900;
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
  min-height: 54px;
}

section.main-panel[data-module="atmosphere"] .smpack-choice:hover{
  border-color: rgba(160,110,255,.22);
  box-shadow: 0 14px 28px rgba(120,80,255,.08);
  transform: translateY(-1px);
}

section.main-panel[data-module="atmosphere"] .smpack-choice.is-active{
  border-color: rgba(190,140,255,.42);
  background:
    radial-gradient(900px 240px at 50% -60%, rgba(190,140,255,.22), transparent 60%),
    linear-gradient(180deg, rgba(28,18,55,.62), rgba(20,14,40,.72));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.05),
    0 16px 32px rgba(120,80,255,.12);
}

/* ---------- pills row ---------- */
section.main-panel[data-module="atmosphere"] .smpack-row{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

section.main-panel[data-module="atmosphere"] .smpack-pill{
  appearance: none;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.82);
  padding: 7px 11px;
  border-radius: 999px;
  font-size: 12.5px;
  font-weight: 900;
  cursor: pointer;
  transition: transform .15s ease, border-color .15s ease, background .15s ease, box-shadow .15s ease;
}

section.main-panel[data-module="atmosphere"] .smpack-pill:hover{
  border-color: rgba(160,110,255,.22);
  box-shadow: 0 12px 26px rgba(120,80,255,.08);
  transform: translateY(-1px);
}

section.main-panel[data-module="atmosphere"] .smpack-pill.is-active,
section.main-panel[data-module="atmosphere"] .smpack-pill[aria-pressed="true"]{
  border-color: rgba(190,140,255,.42);
  background: rgba(120,80,255,.18);
  color: rgba(255,255,255,.92);
}

/* ---------- selects / labels ---------- */
section.main-panel[data-module="atmosphere"] label{
  display: block;
  font-size: 12.5px;
  color: rgba(255,255,255,.74);
  font-weight: 800;
  margin-bottom: 6px;
}

section.main-panel[data-module="atmosphere"] select,
section.main-panel[data-module="atmosphere"] textarea{
  width: 100%;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  color: rgba(255,255,255,.92);
  outline: none;
  font-size: 13px;
}

section.main-panel[data-module="atmosphere"] select{
  padding: 10px 12px;
  height: 40px;
}

section.main-panel[data-module="atmosphere"] textarea{
  padding: 12px 12px;
  min-height: 92px;
  max-height: 180px;
  resize: vertical;
  line-height: 1.25;
}

section.main-panel[data-module="atmosphere"] select:focus,
section.main-panel[data-module="atmosphere"] textarea:focus{
  border-color: rgba(190,140,255,.40);
  box-shadow: 0 0 0 4px rgba(120,80,255,.12);
}

/* ---------- PRO mode “premium” tint ---------- */
section.main-panel[data-module="atmosphere"] .mode-panel[data-mode-panel="pro"] .card{
  border-color: var(--a-b2);
  background: linear-gradient(180deg, rgba(28,18,55,.62), rgba(20,14,40,.72));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.05),
    0 14px 34px rgba(0,0,0,.48);
}

/* PRO: reference tiles (your HTML uses two labels in a 2-col grid) */
section.main-panel[data-module="atmosphere"] .mode-panel[data-mode-panel="pro"] label.btn{
  position: relative;
  overflow: hidden;
  border-radius: 18px;
  border: 1px solid rgba(160,110,255,.28);
  background: linear-gradient(180deg, rgba(28,18,55,.62), rgba(20,14,40,.72));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 10px 24px rgba(0,0,0,.42);
  font-weight: 900;
  color: rgba(255,255,255,.95);
}

/* “light sweep” on PRO reference labels */
section.main-panel[data-module="atmosphere"] .mode-panel[data-mode-panel="pro"] label.btn::before{
  content:"";
  position:absolute;
  top:-35%;
  left:-70%;
  width:55%;
  height:170%;
  pointer-events:none;
  background: linear-gradient(90deg,
    rgba(255,255,255,0),
    rgba(255,255,255,.10),
    rgba(190,140,255,.22),
    rgba(255,255,255,.08),
    rgba(255,255,255,0)
  );
  transform: skewX(-18deg);
  opacity:.80;
  animation: atmoSweep 2.7s ease-in-out infinite;
}

section.main-panel[data-module="atmosphere"] .mode-panel[data-mode-panel="pro"] label.btn::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  border-radius: inherit;
  box-shadow: 0 0 0 1px rgba(190,140,255,.10), 0 0 26px rgba(120,80,255,.08);
  opacity:.85;
}

@keyframes atmoSweep{
  0%   { transform: translateX(0) skewX(-18deg); opacity:.20; }
  35%  { opacity:.95; }
  100% { transform: translateX(340%) skewX(-18deg); opacity:.25; }
}

/* PRO: mood pills slightly tighter */
section.main-panel[data-module="atmosphere"] .mode-panel[data-mode-panel="pro"] .smpack-row{
  gap: 8px;
}

section.main-panel[data-module="atmosphere"] .mode-panel[data-mode-panel="pro"] .smpack-pill{
  padding: 7px 10px;
  font-size: 12.5px;
}

/* ---------- small responsive tightening ---------- */
@media (max-width: 980px){
  section.main-panel[data-module="atmosphere"] .mode-switch{
    grid-template-columns: 1fr;
  }
  section.main-panel[data-module="atmosphere"] .page-head{
    padding: 16px;
  }
  section.main-panel[data-module="atmosphere"] .card{
    padding: 14px;
  }
}
/* ===== ATM CTA (GLOBAL) ===== */

.atmPersCta{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:stretch;
}

.atmProMiniInfo{
  font-size:12px;
  font-weight:600;
  letter-spacing:.4px;
  opacity:.65;
  text-align:center;
  padding:6px 0;
}

/* asıl kritik: buton stili artık #atmPersonalCard'a bağlı değil */
.atmBigCtaBtn{
  width:100%;
  border:none;
  border-radius:999px;
  padding:18px 20px;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
  color:#fff;
  background:linear-gradient(90deg, rgba(120,80,255,.95), rgba(255,110,190,.95));
  box-shadow:0 18px 50px rgba(0,0,0,.45);
  transition:transform .15s ease, filter .15s ease;
}

.atmBigCtaBtn:hover{
  transform:translateY(-1px);
  filter:brightness(1.06);
}

.atmBigCtaBtn:active{
  transform:translateY(0px) scale(.99);
}

/* Süper mod gradienti biraz farklı kalsın istiyorsan */
.atmBigCtaBtn--pro{
  background:linear-gradient(90deg, rgba(140,90,255,.95), rgba(255,110,210,.95));
}
/* LUT inline row (yükseklik fix) */
.atmLutRow{
  margin-top:12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
}

.atmLutLabel{
  font-weight:600;
  font-size:13px;
  opacity:.8;
  white-space:nowrap;
}

.atmLutSelect{
  width:220px;
  max-width:55%;
  border-radius:12px;
}
/* Detay Efektler: desktop'ta 3 kolon (6 seçenek = 2 satır), dar ekranda 2 kolon */
#atmProDetails .atmProFxGrid{
  display:grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:8px 16px;
  align-items:center;
  margin-top:6px;
}

@media (max-width: 1100px){
  #atmProDetails .atmProFxGrid{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* label'ların grid'i bozmasını engelle + satır yüksekliğini düşür */
#atmProDetails .atmProFxGrid label{
  display:flex !important;
  align-items:center;
  gap:10px;
  width:auto !important;
  min-width:0;
  margin:0 !important;
  padding:0 !important;
  line-height:1.15;
}

/* LUT satırını kompakt: label solda, select sağda (yükseklik düşer) */
#atmProDetails .atmLutRow{
  display:grid;
  grid-template-columns: 220px 1fr;
  gap:12px;
  align-items:center;
  margin-top:10px;
}

#atmProDetails .atmLutLabel{
  font-weight:700;
  font-size:13px;
  opacity:.85;
  white-space:nowrap;
}

#atmProDetails .atmLutSelect{
  width:100%;
  height:42px;            /* kritik: dev select'i küçültür */
  border-radius:12px;
}
/* =========================
   ATM SUPER — FORCE COMPACT
   (selector garanti tutsun)
   ========================= */

/* 1) Işık·Export·Duygu: inline grid div'i direkt yakala */
#atmProMoodExport > div[style*="display:grid"][style*="grid-template-columns"]{
  grid-template-columns: 1.35fr .65fr !important; /* sağ kolon dar */
  gap: 10px 14px !important;
  align-items: start !important;
}

/* Kart içi dikey boşlukları sıkıştır */
#atmProMoodExport.card{
  padding-bottom: 10px !important;
}
#atmProMoodExport .card-header{
  padding-bottom: 6px !important;
}
#atmProMoodExport .card-title{
  line-height: 1.1 !important;
}

/* Pill’leri küçült (yükseklik kazan) */
#atmProMoodExport .smpack-row{ gap: 8px !important; }
#atmProMoodExport .smpack-pill{
  padding: 6px 12px !important;
  font-size: 13px !important;
  line-height: 1.1 !important;
}

/* Export alanındaki label + select’leri kompakt yap */
#atmProMoodExport label{
  gap: 8px !important;
  margin-bottom: 6px !important;
  font-size: 13px !important;
}
#atmProMoodExport select{
  width: 100% !important;
  height: 38px !important;
  font-size: 14px !important;
}

/* 2) Detay Efektler: inline grid’i yakala ve 3 kolon yap */
#atmProDetails > div[style*="display:grid"][style*="grid-template-columns"]{
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 6px 12px !important;
  align-items: start !important;
}

/* Label satırlarını kısalt */
#atmProDetails label{
  gap: 8px !important;
  font-size: 13px !important;
  line-height: 1.15 !important;
  white-space: nowrap !important;
}
#atmProDetails input[type="checkbox"]{
  transform: scale(.92) !important;
  transform-origin: left center !important;
}

/* 3) LUT satırı tek satır: label + select */
#atmProDetails .atmLutRow{
  display: grid !important;
  grid-template-columns: 170px 1fr !important;
  gap: 10px !important;
  align-items: center !important;
  margin-top: 10px !important;
}
#atmProDetails .atmLutLabel{
  font-weight: 600 !important;
  font-size: 13px !important;
  opacity: .8 !important;
}
#atmProDetails .atmLutSelect{
  width: 100% !important;
  height: 38px !important;
  font-size: 14px !important;
}

/* 4) En kritik: CTA’yı sticky yap -> alta sarkma “bitiyor” */
.smpack-card--cta{
  position: sticky !important;
  bottom: 12px !important;
  z-index: 5 !important;
  margin-top: 10px !important;
  backdrop-filter: blur(10px) !important;
}
/* =========================
   ATM — BOTH MODES COMPACT
   ========================= */

/* Mood/Export kartı: hem basic hem pro için aynı iç-grid’i yakala */
.mode-panel .card[id*="MoodExport"] > div[style*="display:grid"][style*="grid-template-columns"],
.mode-panel #atmProMoodExport > div[style*="display:grid"][style*="grid-template-columns"]{
  grid-template-columns: 1.35fr .65fr !important;
  gap: 10px 14px !important;
  align-items: start !important;
}

/* Detay kartı: hem basic hem pro */
.mode-panel .card[id*="Details"] > div[style*="display:grid"][style*="grid-template-columns"],
.mode-panel #atmProDetails > div[style*="display:grid"][style*="grid-template-columns"]{
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 6px 12px !important;
}

/* Ortak: pill + label kompakt */
.mode-panel .smpack-pill{
  padding: 6px 12px !important;
  font-size: 13px !important;
  line-height: 1.1 !important;
}
.mode-panel .card label{
  font-size: 13px !important;
  margin-bottom: 6px !important;
}

/* CTA sticky: iki mod için de */
.mode-panel .smpack-card--cta{
  position: sticky !important;
  bottom: 12px !important;
  z-index: 5 !important;
}
